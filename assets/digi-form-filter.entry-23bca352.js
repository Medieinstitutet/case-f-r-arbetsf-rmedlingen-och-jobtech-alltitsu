import{r as s,c as o,h as e,g}from"./index-e970ef30.js";import{r as n}from"./randomIdGenerator.util-17972493-3e0a24fb.js";import{l as a}from"./logger.util-9b5aeb0e-eecc5f5e.js";import{d as f}from"./detectClickOutside.util-2e9cc8d8-d666b039.js";import{d as l}from"./detectFocusOutside.util-93fcba55-e3a25d95.js";import{_ as m}from"./text-2fb6c0c4-138bda8d.js";import"./detectClosest.util-903e8234-8e14c786.js";const c='.digi--util--fs--xs.sc-digi-form-filter{font-size:var(--digi--global--typography--font-size--small) !important}.digi--util--fs--s.sc-digi-form-filter{font-size:calc(var(--digi--global--typography--font-size--small) + 1px) !important}.digi--util--fs--m.sc-digi-form-filter{font-size:var(--digi--global--typography--font-size--base) !important}.digi--util--fs--l.sc-digi-form-filter{font-size:var(--digi--global--typography--font-size--large) !important}.digi--util--fw--sb.sc-digi-form-filter{font-weight:var(--digi--global--typography--font-weight--semibold) !important}.digi--util--pt--1.sc-digi-form-filter{padding-top:var(--digi--global--spacing--smallest-2) !important}.digi--util--pt--10.sc-digi-form-filter{padding-top:var(--digi--global--spacing--smallest) !important}.digi--util--pt--20.sc-digi-form-filter{padding-top:var(--digi--global--spacing--base) !important}.digi--util--pt--30.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-2) !important}.digi--util--pt--40.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-4) !important}.digi--util--pt--50.sc-digi-form-filter{padding-top:2.5rem !important}.digi--util--pt--60.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-5) !important}.digi--util--pt--70.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-6) !important}.digi--util--pt--80.sc-digi-form-filter{padding-top:4.5rem !important}.digi--util--pt--90.sc-digi-form-filter{padding-top:5rem !important}.digi--util--pb--1.sc-digi-form-filter{padding-bottom:var(--digi--global--spacing--smallest-2) !important}.digi--util--pb--10.sc-digi-form-filter{padding-bottom:var(--digi--global--spacing--smallest) !important}.digi--util--pb--20.sc-digi-form-filter{padding-bottom:var(--digi--global--spacing--base) !important}.digi--util--pb--30.sc-digi-form-filter{padding-bottom:var(--digi--global--spacing--largest-2) !important}.digi--util--pb--40.sc-digi-form-filter{padding-bottom:var(--digi--global--spacing--largest-4) !important}.digi--util--pb--50.sc-digi-form-filter{padding-bottom:2.5rem !important}.digi--util--pb--60.sc-digi-form-filter{padding-bottom:var(--digi--global--spacing--largest-5) !important}.digi--util--pb--70.sc-digi-form-filter{padding-bottom:var(--digi--global--spacing--largest-6) !important}.digi--util--pb--80.sc-digi-form-filter{padding-bottom:4.5rem !important}.digi--util--pb--90.sc-digi-form-filter{padding-bottom:5rem !important}.digi--util--p--1.sc-digi-form-filter{padding:var(--digi--global--spacing--smallest-2) !important}.digi--util--p--10.sc-digi-form-filter{padding:var(--digi--global--spacing--smallest) !important}.digi--util--p--20.sc-digi-form-filter{padding:var(--digi--global--spacing--base) !important}.digi--util--p--30.sc-digi-form-filter{padding:var(--digi--global--spacing--largest-2) !important}.digi--util--p--40.sc-digi-form-filter{padding:var(--digi--global--spacing--largest-4) !important}.digi--util--p--50.sc-digi-form-filter{padding:2.5rem !important}.digi--util--p--60.sc-digi-form-filter{padding:var(--digi--global--spacing--largest-5) !important}.digi--util--p--70.sc-digi-form-filter{padding:var(--digi--global--spacing--largest-6) !important}.digi--util--p--80.sc-digi-form-filter{padding:4.5rem !important}.digi--util--p--90.sc-digi-form-filter{padding:5rem !important}.digi--util--ptb--1.sc-digi-form-filter{padding-top:var(--digi--global--spacing--smallest-2) !important;padding-bottom:var(--digi--global--spacing--smallest-2) !important}.digi--util--ptb--10.sc-digi-form-filter{padding-top:var(--digi--global--spacing--smallest) !important;padding-bottom:var(--digi--global--spacing--smallest) !important}.digi--util--ptb--20.sc-digi-form-filter{padding-top:var(--digi--global--spacing--base) !important;padding-bottom:var(--digi--global--spacing--base) !important}.digi--util--ptb--30.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-2) !important;padding-bottom:var(--digi--global--spacing--largest-2) !important}.digi--util--ptb--40.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-4) !important;padding-bottom:var(--digi--global--spacing--largest-4) !important}.digi--util--ptb--50.sc-digi-form-filter{padding-top:2.5rem !important;padding-bottom:2.5rem !important}.digi--util--ptb--60.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-5) !important;padding-bottom:var(--digi--global--spacing--largest-5) !important}.digi--util--ptb--70.sc-digi-form-filter{padding-top:var(--digi--global--spacing--largest-6) !important;padding-bottom:var(--digi--global--spacing--largest-6) !important}.digi--util--ptb--80.sc-digi-form-filter{padding-top:4.5rem !important;padding-bottom:4.5rem !important}.digi--util--ptb--90.sc-digi-form-filter{padding-top:5rem !important;padding-bottom:5rem !important}.digi--util--plr--1.sc-digi-form-filter{padding-left:var(--digi--global--spacing--smallest-2) !important;padding-right:var(--digi--global--spacing--smallest-2) !important}.digi--util--plr--10.sc-digi-form-filter{padding-left:var(--digi--global--spacing--smallest) !important;padding-right:var(--digi--global--spacing--smallest) !important}.digi--util--plr--20.sc-digi-form-filter{padding-left:var(--digi--global--spacing--base) !important;padding-right:var(--digi--global--spacing--base) !important}.digi--util--plr--30.sc-digi-form-filter{padding-left:var(--digi--global--spacing--largest-2) !important;padding-right:var(--digi--global--spacing--largest-2) !important}.digi--util--plr--40.sc-digi-form-filter{padding-left:var(--digi--global--spacing--largest-4) !important;padding-right:var(--digi--global--spacing--largest-4) !important}.digi--util--plr--50.sc-digi-form-filter{padding-left:2.5rem !important;padding-right:2.5rem !important}.digi--util--plr--60.sc-digi-form-filter{padding-left:var(--digi--global--spacing--largest-5) !important;padding-right:var(--digi--global--spacing--largest-5) !important}.digi--util--plr--70.sc-digi-form-filter{padding-left:var(--digi--global--spacing--largest-6) !important;padding-right:var(--digi--global--spacing--largest-6) !important}.digi--util--plr--80.sc-digi-form-filter{padding-left:4.5rem !important;padding-right:4.5rem !important}.digi--util--plr--90.sc-digi-form-filter{padding-left:5rem !important;padding-right:5rem !important}.digi--util--sr-only.sc-digi-form-filter{border:0;clip:rect(1px, 1px, 1px, 1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.sc-digi-form-filter-h{--digi--form-filter--footer--background:var(--digi--color--background--secondary);--digi--form-filter--scroll--max-height:18.75rem;--digi--form-filter--scroll--max-height--large:23.4275rem;--digi--form-filter--scroll--padding:var(--digi--padding--small);--digi--form-filter--reset-button--margin-left:var(--digi--padding--small);--digi--form-filter--legend__border-bottom:var(--digi--border-width--primary) solid var(--digi--color--border--neutral-2);--digi--form-filter--list--margin:0;--digi--form-filter--list--padding:var(--digi--gutter--small) 0 0 0;--digi--form-filter--item--margin:var(--digi--gutter--small) 0;--digi--form-filter--toggle-icon--transition:ease-in-out 0.2s all;--digi--form-filter--dropdown--box-shadow:0 0.125rem 0.375rem 0 rgba(0, 0, 0, 0.7);--digi--form-filter--dropdown--border-radius:var(--digi--border--radius--primary);--digi--form-filter--dropdown--background:var(--digi--color--background--primary);--digi--form-filter--dropdown--min-width:18.75rem;--digi--form-filter--dropdown--margin-top:var(--digi--gutter--small);--digi--form-filter--dropdown--z-index:999;--digi--form-filter--toggle-button-indicator--color--default:transparent;--digi--form-filter--toggle-button-indicator--color--active:var(--digi--color--border--success);--digi--form-filter--toggle-button-indicator--width:0.625rem;--digi--form-filter--toggle-button-indicator--height:0.625rem;--digi--form-filter--toggle-button-indicator--margin-right:var(--digi--margin--small);--digi--form-filter--toggle-button-indicator--margin-left:calc(var(--digi--margin--smaller) * -1);--digi--form-filter--toggle-button--text--margin-right:var(--digi--margin--smaller);--digi--form-filter--toggle-icon--width:0.875rem;--digi--form-filter--toggle-icon--height:0.875rem;--digi--form-filter--legend--font-weight:var(--digi--typography--preamble--font-weight--desktop);--digi--form-filter--legend--font-family:var(--digi--global--typography--font-family--default);--digi--form-filter--legend--font-size:var(--digi--typography--preamble--font-size--desktop)}.sc-digi-form-filter-h .digi-form-filter.sc-digi-form-filter{--INDICATOR--BACKGROUND:var(--digi--form-filter--toggle-button-indicator--color--default);--SCROLL--MAX-HEIGHT:var(--digi--form-filter--scroll--max-height);position:relative}.sc-digi-form-filter-h .digi-form-filter--open.sc-digi-form-filter .digi-form-filter__toggle-icon.sc-digi-form-filter{transform:rotate(-180deg)}.sc-digi-form-filter-h .digi-form-filter__toggle-icon.sc-digi-form-filter{transition:var(--digi--form-filter--toggle-icon--transition)}.sc-digi-form-filter-h .digi-form-filter__toggle-icon .sc-digi-form-filter-s>[slot^=icon]{--digi--icon--width:var(--digi--form-filter--toggle-icon--width);--digi--icon--height:var(--digi--form-filter--toggle-icon--height)}.sc-digi-form-filter-h .digi-form-filter__legend.sc-digi-form-filter{font-weight:var(--digi--form-filter--legend--font-weight);font-family:var(--digi--form-filter--legend--font-family);font-size:var(--digi--form-filter--legend--font-size)}.sc-digi-form-filter-h .digi-form-filter__scroll.sc-digi-form-filter{max-height:var(--SCROLL--MAX-HEIGHT);overflow-y:auto;padding:var(--digi--form-filter--scroll--padding)}@media (min-width: 48rem){.sc-digi-form-filter-h .digi-form-filter__scroll.sc-digi-form-filter{--SCROLL--MAX-HEIGHT:var(--digi--form-filter--toggle-icon--height--large)}}.sc-digi-form-filter-h .digi-form-filter__scroll.sc-digi-form-filter fieldset.sc-digi-form-filter{border:none}.sc-digi-form-filter-h .digi-form-filter__scroll.sc-digi-form-filter legend.sc-digi-form-filter{width:100%;border-bottom:var(--digi--form-filter--legend__border-bottom)}.sc-digi-form-filter-h .digi-form-filter__footer.sc-digi-form-filter{display:flex;align-items:center;justify-content:center;background:var(--digi--form-filter--footer--background);padding:var(--digi--form-filter--scroll--padding)}.sc-digi-form-filter-h .digi-form-filter__reset-button.sc-digi-form-filter{display:inline-block;margin-left:var(--digi--form-filter--reset-button--margin-left)}.sc-digi-form-filter-h .digi-form-filter__dropdown.sc-digi-form-filter{min-width:var(--digi--form-filter--dropdown--min-width);position:absolute;z-index:var(--digi--form-filter--dropdown--z-index);background:var(--digi--form-filter--dropdown--background);border-radius:var(--digi--form-filter--dropdown--border-radius);box-shadow:var(--digi--form-filter--dropdown--box-shadow);overflow:hidden;margin-top:var(--digi--form-filter--dropdown--margin-top)}@media (min-width: 48rem){.sc-digi-form-filter-h .digi-form-filter__dropdown--right.sc-digi-form-filter{right:0}}.sc-digi-form-filter-h .digi-form-filter__toggle-button-indicator.sc-digi-form-filter:before{content:"";width:var(--digi--form-filter--toggle-button-indicator--width);height:var(--digi--form-filter--toggle-button-indicator--height);background:var(--INDICATOR--BACKGROUND);display:inline-block;margin-right:var(--digi--form-filter--toggle-button-indicator--margin-right);border-radius:50% 50%;overflow:hidden;margin-left:var(--digi--form-filter--toggle-button-indicator--margin-left)}.sc-digi-form-filter-h .digi-form-filter__toggle-button-indicator--active.sc-digi-form-filter{--INDICATOR--BACKGROUND:var(--digi--form-filter--toggle-button-indicator--color--active)}.sc-digi-form-filter-h .digi-form-filter__list.sc-digi-form-filter{margin:var(--digi--form-filter--list--margin);padding:var(--digi--form-filter--list--padding)}.sc-digi-form-filter-h .digi-form-filter__item.sc-digi-form-filter{margin:var(--digi--form-filter--item--margin);display:block}.sc-digi-form-filter-h .digi-form-filter__toggle-button-text.sc-digi-form-filter{margin-right:var(--digi--form-filter--toggle-button--text--margin-right)}',p=class{constructor(i){s(this,i),this.afOnFocusout=o(this,"afOnFocusout",7),this.afOnSubmitFilters=o(this,"afOnSubmitFilters",7),this.afOnFilterClosed=o(this,"afOnFilterClosed",7),this.afOnResetFilters=o(this,"afOnResetFilters",7),this.afOnChange=o(this,"afOnChange",7),this._updateActiveItems=!1,this.activeList=[],this.isActive=!1,this.activeListItemIndex=0,this.hasActiveItems=!1,this.focusInList=!1,this.listItems=[],this.afId=n("digi-form-filter"),this.afFilterButtonText=void 0,this.afSubmitButtonText=void 0,this.afSubmitButtonTextAriaLabel=void 0,this.afResetButtonText=m.clear,this.afResetButtonTextAriaLabel=void 0,this.afHideResetButton=!1,this.afAlignRight=void 0,this.afName=void 0,this.afFilterButtonAriaLabel=void 0,this.afFilterButtonAriaDescribedby=void 0,this.afAutofocus=void 0}clickHandler(i){const t=i.target,r=`#${this.afId}-identifier`;f(t,r)&&this.isActive&&this.emitFilterClosedEvent()}focusoutHandler(i){const t=i.target,r=`#${this.afId}-identifier`;l(t,r)&&this.isActive?this.emitFilterClosedEvent():(this.focusInList=!l(t,`#${this.afId}-filter-list`),this.isActive&&this.focusInList&&t.tagName==="INPUT"&&(this.setTabIndex(),this.updateTabIndex(t)),this.afOnFocusout.emit(i))}changeHandler(i){if(i.target.tagName==="INPUT"){this.setSelectedItems(i.target),this.hasActiveItems=this.activeList.length>0;const t=i.target.closest(".digi-form-filter__item")?i.target.closest(".digi-form-filter__item").getAttribute("data-key"):this.activeListItemIndex;this.activeListItemIndex=Number(t),this.afOnChange.emit(i)}}debounce(i,t=300){let r;return(...d)=>{clearTimeout(r),r=setTimeout(()=>{i.apply(this,d)},t)}}setSelectedItems(i){this.activeList.some(t=>t.id===i.id)?this.activeList=this.activeList.filter(t=>t.id!==i.id):this.activeList.push(i)}setInactive(i=!1){this.isActive=!1,i&&document.getElementById(`${this.afId}-toggle-button`).focus(),document.querySelector(`#${this.afId}-dropdown-menu .digi-form-filter__scroll`).scrollTop=0}setActive(){this.isActive=!0,this.activeListItemIndex=0,setTimeout(()=>{this.focusActiveItem()},200)}toggleDropdown(){return this.isActive?this.setInactive():this.setActive()}inputItem(i,t){return document.querySelector(`#${i} .digi-form-filter__item:nth-child(${t}) input`)}getFilterData(){return{filter:this.afName,items:this.activeList.map(i=>({id:i.id,text:i.labels[0].htmlFor===i.id?i.labels[0].innerText:""}))}}emitFilterClosedEvent(){this.setInactive(!0),this.afOnFilterClosed.emit(this.getFilterData())}submitFilters(i=!0){i&&this.setInactive(!0),this.afOnSubmitFilters.emit(this.getFilterData())}resetFilters(){this.listItems.map((i,t)=>{this.inputItem(`${this.afId}-filter-list`,t+1).checked=!1}),this.activeList=[],this.hasActiveItems=!1,this.afOnResetFilters.emit(this.afName)}setupListElements(i){if(!i||i.length<=0){a.warn("The slot contains no filter elements.",this.hostElement);return}this.listItems=Array.from(i).map((t,r)=>({index:r,outerHTML:t.cloneNode().outerHTML}))}componentWillLoad(){this.setupListElements(this.hostElement.children)}setupActiveItems(){this.setTabIndex(),setTimeout(()=>{const i=document.getElementById(`${this.afId}-identifier`);let t=Array.from(i==null?void 0:i.querySelectorAll(".digi-form-filter__list input:checked"));this.activeList=[],t.forEach(r=>{this.setSelectedItems(r)}),this.hasActiveItems=this.activeList.length>0})}componentDidLoad(){this.setupActiveItems()}componentDidUpdate(){this._updateActiveItems&&(this._updateActiveItems=!1,this.setupActiveItems())}focusActiveItem(){this.inputItem(`${this.afId}-filter-list`,this.activeListItemIndex+1).focus()}incrementActiveItem(){if(this.activeListItemIndex<this.listItems.length-1){this.activeListItemIndex=this.activeListItemIndex+1,this.focusActiveItem();return}this.tabHandler()}setTabIndex(){const i=document.querySelectorAll(`#${this.afId}-dropdown-menu`);if(!i){a.warn("No input elements was found to set tabindex on.",this.hostElement);return}Array.from(i).map(t=>{t.setAttribute("tabindex","-1")})}updateTabIndex(i){if(!i){a.warn("No input element was found to update tabindex on.",this.hostElement);return}i.setAttribute("tabindex","0")}decrementActiveItem(){if(this.activeListItemIndex===0){this._toggleButton.querySelector("button").focus();return}this.activeListItemIndex>0&&(this.activeListItemIndex=this.activeListItemIndex-1),this.focusActiveItem()}downHandler(i){i.detail.preventDefault(),this.incrementActiveItem()}upHandler(i){i.detail.preventDefault(),this.decrementActiveItem()}homeHandler(i){i.detail.preventDefault(),this.activeListItemIndex=0,this.focusActiveItem()}endHandler(i){i.detail.preventDefault(),this.activeListItemIndex=this.listItems.length-1,this.focusActiveItem()}enterHandler(i){i.detail.target.click()}escHandler(){this.isActive&&this.setInactive(!0)}tabHandler(){this.isActive&&this.focusInList&&setTimeout(()=>{this._submitButton.querySelector("button").focus()},10)}shiftHandler(){this.isActive&&this.focusInList&&(this._toggleButton.querySelector("button").focus(),this.activeListItemIndex=this.activeListItemIndex>=0?this.activeListItemIndex-1:this.activeListItemIndex)}get cssModifiers(){return{"digi-form-filter--open":this.isActive}}get cssModifiersToggleButtonIndicator(){return{"digi-form-filter__toggle-button-indicator--active":this.hasActiveItems}}render(){return e("div",{class:Object.assign({"digi-form-filter":!0},this.cssModifiers),role:"application",id:`${this.afId}-identifier`},e("digi-util-keydown-handler",{onAfOnEsc:()=>this.escHandler()},e("digi-button",{id:`${this.afId}-toggle-button`,class:"digi-form-filter__toggle-button",onAfOnClick:()=>this.toggleDropdown(),ref:i=>this._toggleButton=i,"af-aria-haspopup":"true","af-variation":"secondary","af-aria-label":this.afFilterButtonAriaLabel,"af-aria-labelledby":this.afFilterButtonAriaDescribedby,"af-aria-controls":`${this.afId}-dropdown-menu`,"af-aria-expanded":this.isActive,"af-autofocus":this.afAutofocus?this.afAutofocus:null},e("i",{class:Object.assign({"digi-form-filter__toggle-button-indicator":!0},this.cssModifiersToggleButtonIndicator)}),e("span",{class:"digi-form-filter__toggle-button-text"},this.afFilterButtonText),e("digi-icon",{class:"digi-form-filter__toggle-icon",slot:"icon-secondary",afName:"chevron-down"})),e("div",{hidden:!this.isActive,id:`${this.afId}-dropdown-menu`,class:{"digi-form-filter__dropdown":!0,"digi-form-filter__dropdown--right":this.afAlignRight}},e("div",{class:"digi-form-filter__scroll"},e("fieldset",null,e("legend",{class:"digi-form-filter__legend"},this.afName),e("digi-util-keydown-handler",{onAfOnDown:i=>this.downHandler(i),onAfOnUp:i=>this.upHandler(i),onAfOnHome:i=>this.homeHandler(i),onAfOnEnd:i=>this.endHandler(i),onAfOnEnter:i=>this.enterHandler(i),onAfOnTab:()=>this.tabHandler(),onAfOnShiftTab:()=>this.shiftHandler()},e("ul",{class:"digi-form-filter__list","aria-labelledby":`${this.afId}-toggle-button`,id:`${this.afId}-filter-list`},this.listItems.map(i=>e("li",{class:"digi-form-filter__item",key:i.index,"data-key":i.index,innerHTML:i.outerHTML})))),e("digi-util-mutation-observer",{hidden:!0,ref:i=>this._observer=i,onAfOnChange:this.debounce(()=>{this.setupListElements(this._observer.children),this._updateActiveItems=!0})},e("slot",null)))),e("div",{class:"digi-form-filter__footer"},e("digi-util-keydown-handler",{onAfOnUp:()=>this.focusActiveItem()},e("digi-button",{ref:i=>this._submitButton=i,"af-variation":"primary","af-aria-label":this.afSubmitButtonTextAriaLabel,onClick:()=>{this.submitFilters(),this._toggleButton.querySelector("button").focus()},class:"digi-form-filter__submit-button"},this.afSubmitButtonText)),!this.afHideResetButton&&e("digi-button",{"af-variation":"secondary","af-aria-label":this.afResetButtonTextAriaLabel,onClick:()=>this.resetFilters(),class:"digi-form-filter__reset-button"},this.afResetButtonText)))))}get hostElement(){return g(this)}};p.style=c;export{p as digi_form_filter};
