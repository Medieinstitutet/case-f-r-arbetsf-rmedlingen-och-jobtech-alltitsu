import{r as s,c as t,z as f,A as p,G as m,h as o,a as u,b as c,g as h}from"./index-55b4449e.js";import{r as g}from"./randomIdGenerator.util-17972493-3e0a24fb.js";const b=".digi--util--fs--xs.sc-digi-form-file-upload{font-size:var(--digi--global--typography--font-size--small) !important}.digi--util--fs--s.sc-digi-form-file-upload{font-size:calc(var(--digi--global--typography--font-size--small) + 1px) !important}.digi--util--fs--m.sc-digi-form-file-upload{font-size:var(--digi--global--typography--font-size--base) !important}.digi--util--fs--l.sc-digi-form-file-upload{font-size:var(--digi--global--typography--font-size--large) !important}.digi--util--fw--sb.sc-digi-form-file-upload{font-weight:var(--digi--global--typography--font-weight--semibold) !important}.digi--util--pt--1.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--smallest-2) !important}.digi--util--pt--10.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--smallest) !important}.digi--util--pt--20.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--base) !important}.digi--util--pt--30.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-2) !important}.digi--util--pt--40.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-4) !important}.digi--util--pt--50.sc-digi-form-file-upload{padding-top:2.5rem !important}.digi--util--pt--60.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-5) !important}.digi--util--pt--70.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-6) !important}.digi--util--pt--80.sc-digi-form-file-upload{padding-top:4.5rem !important}.digi--util--pt--90.sc-digi-form-file-upload{padding-top:5rem !important}.digi--util--pb--1.sc-digi-form-file-upload{padding-bottom:var(--digi--global--spacing--smallest-2) !important}.digi--util--pb--10.sc-digi-form-file-upload{padding-bottom:var(--digi--global--spacing--smallest) !important}.digi--util--pb--20.sc-digi-form-file-upload{padding-bottom:var(--digi--global--spacing--base) !important}.digi--util--pb--30.sc-digi-form-file-upload{padding-bottom:var(--digi--global--spacing--largest-2) !important}.digi--util--pb--40.sc-digi-form-file-upload{padding-bottom:var(--digi--global--spacing--largest-4) !important}.digi--util--pb--50.sc-digi-form-file-upload{padding-bottom:2.5rem !important}.digi--util--pb--60.sc-digi-form-file-upload{padding-bottom:var(--digi--global--spacing--largest-5) !important}.digi--util--pb--70.sc-digi-form-file-upload{padding-bottom:var(--digi--global--spacing--largest-6) !important}.digi--util--pb--80.sc-digi-form-file-upload{padding-bottom:4.5rem !important}.digi--util--pb--90.sc-digi-form-file-upload{padding-bottom:5rem !important}.digi--util--p--1.sc-digi-form-file-upload{padding:var(--digi--global--spacing--smallest-2) !important}.digi--util--p--10.sc-digi-form-file-upload{padding:var(--digi--global--spacing--smallest) !important}.digi--util--p--20.sc-digi-form-file-upload{padding:var(--digi--global--spacing--base) !important}.digi--util--p--30.sc-digi-form-file-upload{padding:var(--digi--global--spacing--largest-2) !important}.digi--util--p--40.sc-digi-form-file-upload{padding:var(--digi--global--spacing--largest-4) !important}.digi--util--p--50.sc-digi-form-file-upload{padding:2.5rem !important}.digi--util--p--60.sc-digi-form-file-upload{padding:var(--digi--global--spacing--largest-5) !important}.digi--util--p--70.sc-digi-form-file-upload{padding:var(--digi--global--spacing--largest-6) !important}.digi--util--p--80.sc-digi-form-file-upload{padding:4.5rem !important}.digi--util--p--90.sc-digi-form-file-upload{padding:5rem !important}.digi--util--ptb--1.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--smallest-2) !important;padding-bottom:var(--digi--global--spacing--smallest-2) !important}.digi--util--ptb--10.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--smallest) !important;padding-bottom:var(--digi--global--spacing--smallest) !important}.digi--util--ptb--20.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--base) !important;padding-bottom:var(--digi--global--spacing--base) !important}.digi--util--ptb--30.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-2) !important;padding-bottom:var(--digi--global--spacing--largest-2) !important}.digi--util--ptb--40.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-4) !important;padding-bottom:var(--digi--global--spacing--largest-4) !important}.digi--util--ptb--50.sc-digi-form-file-upload{padding-top:2.5rem !important;padding-bottom:2.5rem !important}.digi--util--ptb--60.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-5) !important;padding-bottom:var(--digi--global--spacing--largest-5) !important}.digi--util--ptb--70.sc-digi-form-file-upload{padding-top:var(--digi--global--spacing--largest-6) !important;padding-bottom:var(--digi--global--spacing--largest-6) !important}.digi--util--ptb--80.sc-digi-form-file-upload{padding-top:4.5rem !important;padding-bottom:4.5rem !important}.digi--util--ptb--90.sc-digi-form-file-upload{padding-top:5rem !important;padding-bottom:5rem !important}.digi--util--plr--1.sc-digi-form-file-upload{padding-left:var(--digi--global--spacing--smallest-2) !important;padding-right:var(--digi--global--spacing--smallest-2) !important}.digi--util--plr--10.sc-digi-form-file-upload{padding-left:var(--digi--global--spacing--smallest) !important;padding-right:var(--digi--global--spacing--smallest) !important}.digi--util--plr--20.sc-digi-form-file-upload{padding-left:var(--digi--global--spacing--base) !important;padding-right:var(--digi--global--spacing--base) !important}.digi--util--plr--30.sc-digi-form-file-upload{padding-left:var(--digi--global--spacing--largest-2) !important;padding-right:var(--digi--global--spacing--largest-2) !important}.digi--util--plr--40.sc-digi-form-file-upload{padding-left:var(--digi--global--spacing--largest-4) !important;padding-right:var(--digi--global--spacing--largest-4) !important}.digi--util--plr--50.sc-digi-form-file-upload{padding-left:2.5rem !important;padding-right:2.5rem !important}.digi--util--plr--60.sc-digi-form-file-upload{padding-left:var(--digi--global--spacing--largest-5) !important;padding-right:var(--digi--global--spacing--largest-5) !important}.digi--util--plr--70.sc-digi-form-file-upload{padding-left:var(--digi--global--spacing--largest-6) !important;padding-right:var(--digi--global--spacing--largest-6) !important}.digi--util--plr--80.sc-digi-form-file-upload{padding-left:4.5rem !important;padding-right:4.5rem !important}.digi--util--plr--90.sc-digi-form-file-upload{padding-left:5rem !important;padding-right:5rem !important}.digi--util--sr-only.sc-digi-form-file-upload{border:0;clip:rect(1px, 1px, 1px, 1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.sc-digi-form-file-upload-h{--digi--form-file-upload--color--background--primary--default:var(--digi--color--background--secondary);--digi--form-file-upload--color--background--primary--hover:var(--digi--global--color--cta--hover--base);--digi--form-file-upload--color--background--secondary--default:var(--digi--color--background--secondary);--digi--form-file-upload--color--background--secondary--hover:var(--digi--global--color--cta--hover--base);--digi--form-file-upload--color--background--tertiary--default:var(--digi--color--background--secondary);--digi--form-file-upload--color--background--tertiary--hover:var(--digi--global--color--cta--hover--base);--digi--form-file-upload--color--border--primary--default:var(--digi--global--color--neutral--grayscale--darkest);--digi--form-file-upload--color--border--primary--hover:var(--digi--global--color--cta--hover--base);--digi--form-file-upload--color--border--secondary--default:var(--digi--global--color--neutral--grayscale--darkest);--digi--form-file-upload--color--border--secondary--hover:var(--digi--global--color--cta--hover--base);--digi--form-file-upload--color--border--tertiary--default:var(--digi--global--color--neutral--grayscale--darkest);--digi--form-file-upload--color--border--tertiary--hover:var(--digi--global--color--cta--hover--base);--digi--form-file-upload--border-width--primary--default:var(--digi--border-width--secondary);--digi--form-file-upload--border-width--primary--hover:var(--digi--border-width--primary);--digi--form-file-upload--border-width--secondary--default:var(--digi--border-width--secondary);--digi--form-file-upload--border-width--secondary--hover:var(--digi--border-width--primary);--digi--form-file-upload--border-width--tertiary--default:var(--digi--border-width--secondary);--digi--form-file-upload--border-width--tertiary--hover:var(--digi--border-width--primary);--digi--form-file-upload--border-style--primary--default:solid;--digi--form-file-upload--border-style--secondary--default:dashed;--digi--form-file-upload--border-style--tertiary--default:dashed;--digi--form-file-upload--border-radius--primary--default:var(--digi--border-radius--secondary);--digi--form-file-upload--border-radius--secondary--default:var(--digi--border-radius--secondary);--digi--form-file-upload--border-radius--tertiary--default:var(--digi--border-radius--secondary);--digi--form-file-upload--padding--primary:var(--digi--gutter--medium) var(--digi--gutter--largest);--digi--form-file-upload--padding--secondary:var(--digi--gutter--largest) var(--digi--gutter--largest);--digi--form-file-upload--padding--tertiary:var(--digi--gutter--largest) var(--digi--gutter--largest-3);--digi--form-file-upload--font-size--small:var(--digi--global--typography--font-size--small);--digi--form-file-upload--font-size--medium:var(--digi--global--typography--font-size--base);--digi--form-file-upload--font-size--large:var(--digi--global--typography--font-size--large);--digi--form-file-upload--heading--font-family:var(--digi--global--typography--font-family--default);--digi--form-file-upload--heading--font-weight:var(--digi--typography--heading-4--font-weight--desktop);--digi--form-file-upload--heading--font-size:var(--digi--typography--heading-4--font-size--desktop);--digi--form-file-upload--heading--font-size--large:var(--digi--typography--heading-4--font-size--desktop-large);--digi--form-file-upload--font-family:var(--digi--global--typography--font-family--default);--digi--form-file-upload--font-weight:var(--digi--typography--form-file-upload--font-weight--desktop);--digi--form-file-upload--button-text--color--default:var(--digi--global--color--cta--link--base);--digi--form-file-upload--button-text--color--hover:var(--digi--global--color--function--info--light);--digi--form-file-upload--width--primary:max-content;--digi--form-file-upload--width--secondary:300px;--digi--form-file-upload--width--tertiary:100%}.sc-digi-form-file-upload-h .digi-form-file-upload--primary.sc-digi-form-file-upload{--COLOR--BACKGROUND--DEFAULT:var(--digi--form-file-upload--color--background--primary--default);--COLOR--BACKGROUND--HOVER:var(--digi--form-file-upload--color--background--primary--hover);--COLOR--BORDER--DEFAULT:var(--digi--form-file-upload--color--border--primary--default);--COLOR--BORDER--HOVER:var(--digi--form-file-upload--color--border--primary--default);--BORDER-STYLE--DEFAULT:var(--digi--form-file-upload--border-style--primary--default);--BORDER-RADIUS--DEFAULT:var(--digi--form-file-upload--border-radius--primary--default);--BORDER-WIDTH--DEFAULT:var(--digi--form-file-upload--border-width--primary--default);--WIDTH:var(--digi--form-file-upload--width--primary);--FONT-WEIGHT:var(--digi--form-file-upload--font-weight);--PADDING:var(--digi--form-file-upload--padding--primary)}.sc-digi-form-file-upload-h .digi-form-file-upload--secondary.sc-digi-form-file-upload{--COLOR--BACKGROUND--DEFAULT:var(--digi--form-file-upload--color--background--secondary--default);--COLOR--BACKGROUND--HOVER:var(--digi--form-file-upload--color--background--secondary--hover);--COLOR--BORDER--DEFAULT:var(--digi--form-file-upload--color--border--secondary--default);--COLOR--BORDER--HOVER:var(--digi--form-file-upload--color--border--secondary--hover);--BORDER-STYLE--DEFAULT:var(--digi--form-file-upload--border-style--secondary--default);--BORDER-RADIUS--DEFAULT:var(--digi--form-file-upload--border-radius--secondary--default);--BORDER-WIDTH--DEFAULT:var(--digi--form-file-upload--border-width--secondary--default);--WIDTH:var(--digi--form-file-upload--width--secondary);--FONT-WEIGHT:var(--digi--form-file-upload--font-weight);--PADDING:var(--digi--form-file-upload--padding--secondary)}.sc-digi-form-file-upload-h .digi-form-file-upload--tertiary.sc-digi-form-file-upload{--COLOR--BACKGROUND--DEFAULT:var(--digi--form-file-upload--color--background--tertiary--default);--COLOR--BACKGROUND--HOVER:var(--digi--form-file-upload--color--background--tertiary--hover);--COLOR--BORDER--DEFAULT:var(--digi--form-file-upload--color--border--tertiary--default);--COLOR--BORDER--HOVER:var(--digi--form-file-upload--color--border--tertiary--hover);--BORDER-STYLE--DEFAULT:var(--digi--form-file-upload--border-style--tertiary--default);--BORDER-RADIUS--DEFAULT:var(--digi--form-file-upload--border-radius--tertiary--default);--BORDER-WIDTH--DEFAULT:var(--digi--form-file-upload--border-width--tertiary--default);--WIDTH:var(--digi--form-file-upload--width--tertiary);--FONT-WEIGHT:var(--digi--form-file-upload--font-weight);--PADDING:var(--digi--form-file-upload--padding--tertiary)}.sc-digi-form-file-upload-h .digi-form-file-upload__icon.sc-digi-form-file-upload{margin-bottom:var(--digi--margin--medium);opacity:0.7;--digi--icon--height:2.5rem}.sc-digi-form-file-upload-h .digi-form-file-upload__spinner.sc-digi-form-file-upload{animation:animation__rotation 3s infinite linear;transform-origin:center;--digi--icon--height:1rem}@media (prefers-reduced-motion){.sc-digi-form-file-upload-h .digi-form-file-upload__spinner.sc-digi-form-file-upload{animation:none}}@keyframes animation__rotation{from{transform:rotate(0deg)}to{transform:rotate(359deg)}}.sc-digi-form-file-upload-h .digi-form-file-upload__input.sc-digi-form-file-upload{display:none}.sc-digi-form-file-upload-h .digi-form-file-upload__button.sc-digi-form-file-upload{margin-top:auto;text-align:center;background:none;border:none;cursor:pointer;margin:0;font-weight:var(--digi--typography--button--font-weight--desktop);font-size:var(--digi--typography--body--font-size--desktop);color:var(--digi--form-file-upload--button-text--color--default);display:flex;align-items:center;font-family:var(--digi--global--typography--font-family--default)}.sc-digi-form-file-upload-h .digi-form-file-upload__button.sc-digi-form-file-upload:hover{color:var(--digi--form-file-upload--button-text--color--hover)}.sc-digi-form-file-upload-h .digi-form-file-upload__button.sc-digi-form-file-upload:hover .digi-form-file-upload__button-icon.sc-digi-form-file-upload{--digi--icon--color:var(--digi--form-file-upload--button-text--color--hover)}.sc-digi-form-file-upload-h .digi-form-file-upload__button.sc-digi-form-file-upload:focus{border-color:var(--digi--global--color--function--info--base)}.sc-digi-form-file-upload-h .digi-form-file-upload__button-icon.sc-digi-form-file-upload{width:20px;height:20px;margin-left:5px}@media (min-width: 500px){.sc-digi-form-file-upload-h .digi-form-file-upload__button--mobile.sc-digi-form-file-upload{display:none}}.sc-digi-form-file-upload-h .digi-form-file-upload__upload-area.sc-digi-form-file-upload{border-color:var(--COLOR--BORDER--DEFAULT);border-radius:var(--BORDER-RADIUS--DEFAULT);border-width:var(--BORDER-WIDTH--DEFAULT);border-style:var(--BORDER-STYLE--DEFAULT);max-width:var(--WIDTH);display:flex;flex-direction:column;background-color:var(--COLOR--BACKGROUND--DEFAULT);align-items:center;padding:var(--PADDING);margin-bottom:var(--digi--gutter--medium);position:relative;cursor:pointer}.sc-digi-form-file-upload-h .digi-form-file-upload__upload-area--hover.sc-digi-form-file-upload{border-color:var(--COLOR--BORDER--HOVER)}.sc-digi-form-file-upload-h .digi-form-file-upload__upload-area-overlay.sc-digi-form-file-upload{position:absolute;width:100%;height:100%;background-color:var(--COLOR--BACKGROUND--HOVER);opacity:0.1;top:0;left:0;z-index:10}.sc-digi-form-file-upload-h .digi-form-file-upload__text-area.sc-digi-form-file-upload{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.sc-digi-form-file-upload-h .digi-form-file-upload__text.sc-digi-form-file-upload{display:flex;flex-direction:column;align-items:center;text-align:center}@media screen and (min-width: 48rem){.sc-digi-form-file-upload-h .digi-form-file-upload__text--tertiary.sc-digi-form-file-upload{flex-direction:row;align-items:center}}.sc-digi-form-file-upload-h .digi-form-file-upload__files.sc-digi-form-file-upload{border-radius:var(--BORDER-RADIUS--DEFAULT);max-width:100%;background-color:var(--COLOR--BACKGROUND--DEFAULT);padding:var(--digi--gutter--largest-2) var(--digi--padding--large);margin-bottom:var(--digi--gutter--medium);margin-top:var(--digi--gutter--medium);padding-bottom:var(--digi--padding--smaller)}.sc-digi-form-file-upload-h .digi-form-file-upload__files.sc-digi-form-file-upload ul.sc-digi-form-file-upload{max-width:none;padding:0;margin:0}.sc-digi-form-file-upload-h .digi-form-file-upload__files.sc-digi-form-file-upload h4.sc-digi-form-file-upload{margin:0;padding:0;font-weight:var(--digi--typography--body--font-weight--desktop)}.sc-digi-form-file-upload-h .digi-form-file-upload__files-heading.sc-digi-form-file-upload{font-family:var(--digi--form-file-upload--heading--font-family);font-size:var(--digi--form-file-upload--heading--font-size);font-weight:var(--digi--form-file-upload--heading--font-weight);color:var(--digi--color--text--primary);margin:0;display:block}@media (min-width: 62rem){.sc-digi-form-file-upload-h .digi-form-file-upload__files-heading.sc-digi-form-file-upload{font-size:var(--digi--form-file-upload--heading--font-size--large)}}.sc-digi-form-file-upload-h .digi-form-file-upload__file.sc-digi-form-file-upload{margin:var(--digi--margin--smaller) 0;padding:var(--digi--gutter--medium) 0}.sc-digi-form-file-upload-h .digi-form-file-upload__file-container.sc-digi-form-file-upload{list-style-type:none}.sc-digi-form-file-upload-h .digi-form-file-upload__file-container.sc-digi-form-file-upload:nth-child(n+2){border-top:var(--BORDER-WIDTH--DEFAULT) solid var(--COLOR--BORDER--DEFAULT)}.sc-digi-form-file-upload-h .digi-form-file-upload__file-header.sc-digi-form-file-upload{display:flex;align-items:center}.sc-digi-form-file-upload-h .digi-form-file-upload__file-footer.sc-digi-form-file-upload{padding-left:30px}.sc-digi-form-file-upload-h .digi-form-file-upload__file-name.sc-digi-form-file-upload{overflow:hidden;margin-right:var(--digi--margin--smaller);text-overflow:ellipsis;max-width:18.75rem;padding:var(--digi--padding--smaller);white-space:nowrap;height:-moz-max-content;height:max-content;margin:0 auto 0 0;padding:0 0.5rem 0 0.5rem}@media (max-width: 500px){.sc-digi-form-file-upload-h .digi-form-file-upload__file-name.sc-digi-form-file-upload{padding:0 0.5rem 0 0;max-width:12.75rem}}.sc-digi-form-file-upload-h .digi-form-file-upload__file-icon.sc-digi-form-file-upload{display:flex;justify-content:center;align-items:center}.sc-digi-form-file-upload-h .digi-form-file-upload__file-info.sc-digi-form-file-upload{width:100%}.sc-digi-form-file-upload-h .digi-form-file-upload__file.sc-digi-form-file-upload span.sc-digi-form-file-upload{height:-moz-max-content;height:max-content;margin-left:var(--digi--margin--smaller)}@media (max-width: 500px){.sc-digi-form-file-upload-h .digi-form-file-upload__file.sc-digi-form-file-upload span.sc-digi-form-file-upload{margin-left:0;margin-right:auto}}.sc-digi-form-file-upload-h .digi-form-file-upload__file-button.sc-digi-form-file-upload{margin-left:auto;font-weight:var(--digi--global--typography--font-weight--semibold)}.sc-digi-form-file-upload-h .digi-form-file-upload__file--error.sc-digi-form-file-upload{display:flex;color:red}@media (max-width: 500px){.sc-digi-form-file-upload-h .digi-form-file-upload__file--error.sc-digi-form-file-upload span.sc-digi-form-file-upload{display:none}}.sc-digi-form-file-upload-h .digi-form-file-upload__error.sc-digi-form-file-upload{color:var(--digi--color--icons--danger)}.sc-digi-form-file-upload-h .visually-hidden.sc-digi-form-file-upload{border:0;clip:rect(1px, 1px, 1px, 1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}@media (max-width: 500px){.sc-digi-form-file-upload-h .hidden-mobile.sc-digi-form-file-upload{display:none}}",v=class{constructor(i){s(this,i),this.afOnUploadFile=t(this,"afOnUploadFile",7),this.afOnRemoveFile=t(this,"afOnRemoveFile",7),this.afOnCancelFile=t(this,"afOnCancelFile",7),this.afOnRetryFile=t(this,"afOnRetryFile",7),this.afOnReady=t(this,"afOnReady",3),this.toBase64=a=>new Promise((e,d)=>{const l=new FileReader;l.readAsDataURL(a),l.onload=()=>{let r=l.result.toString().replace(/^data:(.*,)?/,"");r.length%4>0&&(r+="=".repeat(4-r.length%4)),e(r)},l.onerror=r=>d(r)}),this._input=void 0,this.files=[],this.error=!1,this.errorMessage=void 0,this.fileHover=!1,this.afLabel="Ladda upp fil",this.afLabelDescription=void 0,this.afVariation=f.PRIMARY,this.afId=g("digi-form-file-upload"),this.afFileTypes=void 0,this.afFileMaxSize=10,this.afMaxFiles=void 0,this.afName=void 0,this.afUploadBtnText=void 0,this.afRequired=void 0,this.afRequiredText=void 0,this.afAnnounceIfOptional=!1,this.afHeadingFiles="Uppladdade filer",this.afAnnounceIfOptionalText=void 0,this.afValidation=p.ENABLED,this.afHeadingLevel=m.H2}async afMValidateFile(i){this.validateFile(i)}async afMGetAllFiles(){return this.afValidation==="enabled"?this.files.filter(a=>a.status==="OK"):this.files}async afMImportFiles(i){for(const a of i){let e=!1;for(const d of this.files)d.name==a.name&&(this.error=!0,this.errorMessage=`Det finns redan en fil med filnamnet (${a.name})`,e=!0);e||(this.files=[...this.files,a])}}async afMGetFormControlElement(){return this._input}get fileMaxSize(){return this.afFileMaxSize*1048576}checkAcceptedTypes(i){const a=this.afFileTypes.replace(/\s/g,"").split(","),e=i.type,d=i.name.split(".").slice(-1).map(l=>"."+l.toLowerCase()).toString();return a.some(l=>{if(l.includes("/*")){const r=l.split("/").slice(0,1).toString(),n=e.split("/").slice(0,1).toString();return r==n}return l===e||l===d||l==="*"})}validateFile(i){const a=this.files.findIndex(d=>d.name==i.name||d.id==i.id);if(a===-1)return{message:"Something went wrong"};let e=this.files[a];i.status==="OK"?(e.status="OK",delete e.error,this.removeFileFromList(e.id),this.files=[...this.files,e]):(e.status="error",e.error=i.error===void 0?"Fil bedömd som osäker":i.error,this.removeFileFromList(e.id),this.files=[...this.files,e])}emitFile(i){const a=this.getIndexOfFile(i.id);this.afValidation==="enabled"?this.afOnUploadFile.emit(this.files[a]):(this.files[a].status="OK",this.afOnUploadFile.emit(this.files[a]))}onRetryFileHandler(i,a){i.preventDefault();const e=this.removeFileFromList(a);e.status="pending",delete e.error,this.files=[...this.files,e],this.afOnRetryFile.emit(e)}onCancelFileHandler(i,a){i.preventDefault();const e=this.removeFileFromList(a);e.status="error",e.error="Uppladdning avbruten",this.files=[...this.files,e],this.afOnCancelFile.emit(e)}removeFileFromList(i){const a=this.getIndexOfFile(i);if(a===-1)return;const e=this.files[a];return this.files=[...this.files.slice(0,a),...this.files.slice(a+1)],e}getIndexOfFile(i){return this.files.findIndex(e=>e.id==i)}onButtonUploadFileHandler(i){if(i.preventDefault(),!i.target.files)return;const a=i.target.files[0];this.checkAcceptedTypes(a)?this.addUploadedFiles(a):(this.error=!0,this.errorMessage="Filtypen tillåts inte att ladda upp")}onRemoveFileHandler(i,a){i.preventDefault();const e=this.removeFileFromList(a);this.afOnRemoveFile.emit(e),this._input.value="",this.files.length<1&&(this.error=!1)}async addUploadedFiles(i){if(this.error=!1,this.files.length>=this.afMaxFiles){this.error=!0,this.errorMessage="Max antal filer uppladdade!";return}else if(i.size>this.fileMaxSize){this.error=!0,this.errorMessage="Filens storlek är för stor!";return}else for(const a of this.files)if(a.name==i.name){this.error=!0,this.errorMessage="Det finns redan en fil med det filnamnet!";return}i.id=g("file"),i.status="pending",i.base64=await this.toBase64(i),this.files=[...this.files,i],this.emitFile(i)}handleDrop(i){if(i.stopPropagation(),i.preventDefault(),this.fileHover=!1,i.dataTransfer.files){const a=i.dataTransfer.files[0];this.checkAcceptedTypes(a)?this.addUploadedFiles(a):(this.error=!0,this.errorMessage="Filtypen tillåts inte att ladda upp")}}handleAllowDrop(i){this.afVariation!=="secondary"&&(i.stopPropagation(),i.preventDefault())}handleOnDragEnter(i){this.handleAllowDrop(i),this.fileHover=!this.fileHover}handleOnDragLeave(i){this.handleAllowDrop(i),this.fileHover=!this.fileHover}handleInputClick(i){i.cancelBubble=!0,this._input.click()}componentWillLoad(){}componentDidLoad(){this.afOnReady.emit()}componentWillUpdate(){}get cssModifiers(){return{"digi-form-file-upload--primary":this.afVariation=="primary","digi-form-file-upload--secondary":this.afVariation=="secondary","digi-form-file-upload--tertiary":this.afVariation=="tertiary"}}render(){return o("div",{class:Object.assign({"digi-form-file-upload":!0},this.cssModifiers)},o("digi-form-label",{afFor:this.afId,afLabel:this.afLabel,afDescription:this.afLabelDescription,afRequired:this.afRequired,afAnnounceIfOptional:this.afAnnounceIfOptional,afRequiredText:this.afRequiredText,afAnnounceIfOptionalText:this.afAnnounceIfOptionalText}),o("div",{class:{"digi-form-file-upload__upload-area":!0,"digi-form-file-upload__upload-area--hover":this.fileHover},onDrop:i=>this.handleDrop(i),onDragOver:i=>this.handleAllowDrop(i),onDragEnter:i=>this.handleOnDragEnter(i),onDragLeave:i=>this.handleOnDragLeave(i),onClick:i=>this.handleInputClick(i)},this.fileHover&&this.afVariation!="secondary"&&o("div",{class:"digi-form-file-upload__upload-area-overlay"}),this.afVariation=="tertiary"&&o("digi-icon-upload",{style:{"--digi--icon--height":"40px"},class:"digi-form-file-upload__icon","aria-hidden":"true"}),o("div",{class:"digi-form-file-upload__text-area"},o("digi-button",{afVariation:u.FUNCTION,afType:c.BUTTON,onClick:i=>this.handleInputClick(i)},o("digi-icon-paperclip",{"aria-hidden":"true",slot:"icon"}),this.afUploadBtnText?this.afUploadBtnText:"Välj fil"),o("input",{ref:i=>{this._input=i},onChange:i=>this.onButtonUploadFileHandler(i),class:"digi-form-file-upload__input",multiple:!0,type:"file",id:this.afId,accept:this.afFileTypes,name:this.afName?this.afName:null,required:this.afRequired?this.afRequired:null,onDrop:i=>this.handleDrop(i),onDragOver:i=>this.handleAllowDrop(i),"aria-errormessage":"digi-form-file-upload__error","aria-describedBy":"digi-form-file-upload__error"}),this.afVariation!=f.SECONDARY&&"eller dra och släpp en fil inuti det streckade området")),this.error&&o("digi-form-validation-message",{id:"digi-form-file-upload__error",class:"digi-form-file-upload__error",role:"alert","aria-label":this.errorMessage,"af-variation":"error"},this.errorMessage),this.files.length>0&&o("div",{class:"digi-form-file-upload__files"},o(this.afHeadingLevel,{class:"digi-form-file-upload__files-heading"},this.afHeadingFiles),o("ul",{"aria-live":"assertive"},this.files.map(i=>o("li",{class:"digi-form-file-upload__file-container"},i.status=="pending"&&o("div",{class:"digi-form-file-upload__file"},o("div",{class:"digi-form-file-upload__file-header"},o("digi-icon-spinner",{class:"digi-form-file-upload__spinner hidden-mobile"}),o("span",null,"Laddar upp... ",o("span",{class:"hidden-mobile"},"|")),o("p",{class:"digi-form-file-upload__file-name hidden-mobile"},i.name),o("button",{type:"button",onClick:a=>this.onCancelFileHandler(a,i.id),class:"digi-form-file-upload__button hidden-mobile","aria-label":`Avbryt uppladdningen av ${i.name}`},"Avbryt uppladdning"),o("button",{type:"button",onClick:a=>this.onCancelFileHandler(a,i.id),class:"digi-form-file-upload__button digi-form-file-upload__button--mobile","aria-label":`Avbryt uppladdningen av ${i.name}`},o("digi-icon-x-button-outline",{style:{"--digi--icon--height":"20px","--digi--icon--color":"var(--digi--global--color--function--info--base)"},"aria-hidden":"true"})))),i.status=="OK"&&o("div",{class:"digi-form-file-upload__file"},o("div",{class:"digi-form-file-upload__file-header"},o("digi-icon-notification-succes",{style:{"--digi--icon--height":"20px","--digi--icon--color":"green"},class:"hidden-mobile"}),o("p",{class:"digi-form-file-upload__file-name"},i.name),o("button",{type:"button",onClick:a=>this.onRemoveFileHandler(a,i.id),class:"digi-form-file-upload__button hidden-mobile","aria-label":`Ta bort ${i.name}`},"Ta bort fil"),o("button",{type:"button",onClick:a=>this.onRemoveFileHandler(a,i.id),class:"digi-form-file-upload__button digi-form-file-upload__button--mobile","aria-label":`Ta bort ${i.name}`},o("digi-icon-trash",{style:{"--digi--icon--height":"20px","--digi--icon--color":"var(--digi--global--color--function--info--base)"}})))),i.status=="error"&&o("div",{class:"digi-form-file-upload__file"},o("div",{class:"digi-form-file-upload__file-header"},o("digi-icon-danger-outline",{style:{"--digi--icon--height":"20px","--digi--icon--color":"red"},"aria-hidden":"true",class:"hidden-mobile"}),o("span",{class:"digi-form-file-upload__file--error","aria-label":`${i.name} gick inte att ladda upp. ${i.error}`},"Avbruten ",o("span",null,"|")),o("p",{class:`digi-form-file-upload__file-name\r
													digi-form-file-upload__file--error hidden-mobile\r
													`},i.name),this.afValidation==="disabled"||i.error==="Uppladdning avbruten"&&o("div",{style:{display:"flex"}},o("button",{type:"button",onClick:a=>this.onRetryFileHandler(a,i.id),class:"digi-form-file-upload__button digi-form-file-upload__button--file hidden-mobile","aria-label":`Misslyckad uppladdning, försök ladda upp filen igen ${i.name}`},"Försök igen",o("span",null,"|")),o("button",{type:"button",onClick:a=>this.onRetryFileHandler(a,i.id),class:"digi-form-file-upload__button digi-form-file-upload__button--mobile digi-form-file-upload__button--file","aria-label":`Misslyckad uppladdning, försök ladda upp filen igen ${i.name}`,style:{"margin-right":"10px"}},o("digi-icon-update",{style:{"--digi--icon--height":"20px","--digi--icon--color":"var(--digi--global--color--function--info--base)"}}))),o("button",{type:"button",onClick:a=>this.onRemoveFileHandler(a,i.id),class:"digi-form-file-upload__button digi-form-file-upload__button--file hidden-mobile","aria-label":`Misslyckad uppladdning, ta bort ${i.name} från fillistan`},"Ta bort fil"),o("button",{type:"button",onClick:a=>this.onRemoveFileHandler(a,i.id),class:"digi-form-file-upload__button digi-form-file-upload__button--mobile digi-form-file-upload__button--file","aria-label":`Misslyckad uppladdning, ta bort ${i.name} från fillistan`},o("digi-icon-x-button-outline",{style:{"--digi--icon--height":"20px","--digi--icon--color":"var(--digi--global--color--function--info--base)"}}))),o("div",{class:"digi-form-file-upload__file-footer"},o("p",{class:"hidden-mobile",role:"status","aria-label":`${i.name} gick inte att ladda upp. ${i.error}`},`Filen gick inte att ladda upp. ${i.error}`))))))))}get hostElement(){return h(this)}};v.style=b;export{v as digi_form_file_upload};
